{% extends "layouts/base.html" %}

{% block title %}{% block page_title_inner %}{% endblock %}سواعدنا - إدارة التكاليف{% endblock %}

{% block content %}
    <div class="app-wrapper">
        
        {# القائمة الجانبية الحديثة (Sidebar) - تم نقل زر الإغلاق والشعار إلى هنا #}
        <aside class="modern-sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="brand-logo">
                    <i class="fas fa-chart-line"></i>
                    <span>سواعدنا</span>
                </div>
                {# زر الإغلاق يظهر على شاشات الجوال فقط #}
                <button class="sidebar-close" id="sidebarClose" title="إغلاق القائمة">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <nav class="modern-nav">
                {% include 'partials/modern_navigation.html' %}
            </nav>
        </aside>

        <main class="modern-main">
            {# شريط التنقل العلوي (Topbar) - الآن أكثر بساطة #}
            <header class="modern-topbar">
                <div class="topbar-content">
                    {# زر فتح القائمة الجانبية - يظهر على شاشات الجوال فقط #}
                    <button class="sidebar-toggle" id="sidebarToggler" title="إظهار/إخفاء القائمة">
                        <i class="fas fa-bars"></i>
                    </button>
                    
                    {# عنوان الصفحة يظهر فقط على سطح المكتب #}
                    <h1 class="topbar-main-title d-none d-lg-block">{% block page_title %}{% endblock %}</h1>
                    
                    <div class="topbar-actions">
                        {# قائمة المستخدمين والإعدادات #}
                        {% include 'partials/modern_user_menu.html' %}
                    </div>
                </div>
            </header>

            <div class="modern-content">
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        <div class="flash-messages-container">
                            {% for category, message in messages %}
                                <div class="alert alert-{{ category }} alert-dismissible fade show animate-fade-in-up" role="alert">
                                    {{ message }}
                                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                </div>
                            {% endfor %}
                        </div>
                    {% endif %}
                {% endwith %}

                <div class="content-body">
                    {% block app_content %}{% endblock %}
                </div>
            </div>

            <footer class="modern-footer">
                <p>&copy; 2024 Sawaedna Cost App. All rights reserved.</p>
                <div class="footer-links">
                    <a href="#">الشروط والأحكام</a>
                    <a href="#">سياسة الخصوصية</a>
                </div>
            </footer>
        </main>
    </div>
{% endblock %}